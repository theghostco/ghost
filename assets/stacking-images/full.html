<script src="https://code.jquery.com/jquery-latest.min.js"></script>

<script>
 // $(document).ready(function(){

    //section names
    let isSection = document.querySelectorAll('.section-name');
    if (typeof(isSection) != 'undefined' && isSection != null){
      isSection.forEach(function(thisBlock){
        let sectionName = thisBlock.getAttribute('data-name');
        thisBlock.closest('section').classList.add(sectionName+'-section');
        //thisBlock.closest('.sqs-block-code').style.display = 'none';
      });
    }

 // });
</script>

<script>
  setTimeout(function() {
    if (!$('body').hasClass('sqs-edit-mode')) {
      $('.scale-plugin-section').wrapAll('<div class="scale-plugin-body"></div>');

      function wrapElements() {
        $(".scale-plugin-header-section, .scale-plugin-body").wrapAll("<div class='scale-plugin-wrapper'></div>");
      }

      wrapElements();
    }
  }, 50);
</script>

<script>
  $(document).ready(function() {
    $(window).scroll(function() {
      var bottom_of_window = $(window).scrollTop() + $(window).height();
      $('.scale-plugin-section').each(function(index) {
        var top_of_object = $(this).offset().top;
        var bottom_of_object = $(this).offset().top + $(this).outerHeight();


        if (bottom_of_window > top_of_object && $(window).scrollTop() < bottom_of_object) {
          if (index > 0 && index < $('.scale-plugin-section').length) {
            var scaleValue = 1 - ((bottom_of_window - top_of_object) / $(window).height()) * 0.3;
            $('.scale-plugin-section').eq(index - 1).css('transform', 'perspective(1200px) translateX(0px) translateY(0px) scale(' + scaleValue + ') rotate(0deg) rotateX(0deg) rotateY(0deg) translateZ(0px)');
          }
        } else if (index === $('.scale-plugin-section').length - 1 && $(window).scrollTop() >= bottom_of_object) {

          var scaleValue = 0.7;
          $('.scale-plugin-section').eq(index - 1).css('transform', 'perspective(1200px) translateX(0px) translateY(0px) scale(' + scaleValue + ') rotate(0deg) rotateX(0deg) rotateY(0deg) translateZ(0px)');
        }
      });
    });
  });

</script>

<!--
<script>
  setTimeout(function() {
    document.querySelector(".draw-to-reveal-section").insertAdjacentHTML("beforeend", '<canvas id="draw"></canvas>');

    const canvas = document.querySelector("canvas");
    const ctx = canvas.getContext("2d");

    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;

    ctx.fillStyle = "black";
    ctx.fillRect(0, 0, canvas.width, canvas.height);

    ctx.lineJoin = "round";
    ctx.lineWidth = 300;

    ctx.globalCompositeOperation = "destination-out";

    let isDrawing = true;
    let lastX = 0;
    let lastY = 0;


    function draw(e) {
      if (!isDrawing) return;
      ctx.beginPath();
      ctx.moveTo(lastX, lastY);
      ctx.lineTo(e.offsetX, e.offsetY);
      ctx.stroke();
      [lastX, lastY] = [e.offsetX, e.offsetY];
    }

    canvas.addEventListener("mousedown", (e) => {
      isDrawing = true;
      [lastX, lastY] = [e.offsetX, e.offsetY];
    });

    canvas.addEventListener("mousemove", draw);
    canvas.addEventListener("mouseup", () => (isDrawing = false));
    canvas.addEventListener("mouseout", () => (isDrawing = false));

  }, 20);
</script>
-->








html {
  scroll-behavior: smooth;
}

.scale-plugin-wrapper {
  align-content: center;
  align-items: center;
  display: flex !important;
  flex: none;
  flex-direction: column;
  flex-wrap: wrap;
  gap: 200px;
  height: min-content;
  justify-content: flex-start;
  padding: 0;
  position: relative;
  text-decoration: none;
  width: 100%;
  z-index: 8;
  .scale-plugin-header-section {
    align-content: center !important;
    align-items: center !important;
    justify-content: center !important;
    display: flex;
    flex-direction: column !important;
    flex-wrap: nowrap;
    height: 100vh;
    //justify-content: space-between !important;
    max-width: 100%;
    overflow: hidden;
    padding: 0;
    position: sticky;
    top: 0;
    width: 100%;
    will-change: transform;
    z-index: 3;    
    .content-wrapper {
      padding-left: 0 !important;
      padding-right: 0 !important;
    }  
    @media only screen and (max-width: 819px) {
      min-height: 105vh !important;
      padding-top: 0 !important;
      .content-wrapper {padding: 0 !important;}
    }
    @media only screen and (max-width: 767px) {
      min-height: 115vh !important;
      .sqs-block {
        max-width: 80vw !important;
        margin: 0 auto;
      }
    }
  }

  .scale-plugin-body {
    //padding-top: 5vw !important;
    align-content: center;
    align-items: center;
    display: flex;
    flex: none;
    flex-direction: column;
    flex-wrap: nowrap;
    gap: 240px;
    height: min-content;
    justify-content: center;
    max-width: 1480px;
    overflow: visible;
    padding: 0 30px;
    position: relative;
    width: 100%;
    z-index: 8;
    .scale-plugin-section {
      position: sticky;
      //top: 5vw;
      top: 0;
      width: 100%;
      height: 100vh;
      will-change: transform;
      z-index: 1;
      .section-border,
      .section-border * {
        background-color: transparent;
      }
      .section-border {
        max-width: 1420px;
        width: 100%;
        height: 90vh;
        margin: 0 auto;
        padding: 0 5vw;
        box-sizing: border-box;
        top: 5vh;
        .section-background {
          border-radius: 25px;
          @media only screen and (max-width: 1280px) {border-radius: 20px;}
          @media only screen and (max-width: 820px) {border-radius: 16px;}
          @media only screen and (max-width: 640px) {border-radius: 12px;}
        }
        @media only screen and (max-width: 1440px) {max-width: 92vw !important;}
      }
      .content-wrapper {
        padding: 0 4vw !important;
        //padding-top: 5vw !important;
        //padding-bottom: 5vw !important;
      }
      .sqs-block {padding-top: 0 !important;}
      &:first-of-type {
        padding-top: 0 !important;
        //.content-wrapper {padding-top: 5vw !important;}
      }
      &:not(:last-of-type) {
        transform: perspective(1200px);
        .content-wrapper {
          padding-bottom: 0 !important;
        }
      }
      @media only screen and (max-width: 819px) {top: 50px;}
      @media only screen and (max-width: 640px) {top: 100px;}
    }
    @media only screen and (max-width: 819px) {
       gap: 120px;
      .scale-plugin-section {
        min-height: 70vh !important;
        height: 70vh !important;
        .section-border {height: 60vh;}
      }
    }
  }
}

/* DRAW TO REVEAL */

.draw-to-reveal-section {
  canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
  }

/*
  #heroVideo {
    position: fixed;
    right: 0;
    bottom: 0;
    min-width: 100%;
    min-height: 100%;
  }
  */
}
/* DRAW TO REVEAL */









html {
  scroll-behavior: smooth;
}

.scale-plugin-wrapper {
  align-content: center;
  align-items: center;
  display: flex !important;
  flex: none;
  flex-direction: column;
  flex-wrap: wrap;
  gap: 200px;
  height: min-content;
  justify-content: flex-start;
  padding: 0;
  position: relative;
  text-decoration: none;
  width: 100%;
  z-index: 8;
  .scale-plugin-header-section {
    align-content: center !important;
    align-items: center !important;
    justify-content: center !important;
    display: flex;
    flex-direction: column !important;
    flex-wrap: nowrap;
    height: 100vh;
    //justify-content: space-between !important;
    max-width: 100%;
    overflow: hidden;
    padding: 0;
    position: sticky;
    top: 0;
    width: 100%;
    will-change: transform;
    z-index: 3;    
    .content-wrapper {
      padding-left: 0 !important;
      padding-right: 0 !important;
    }  
    @media only screen and (max-width: 819px) {
      min-height: 105vh !important;
      padding-top: 0 !important;
      .content-wrapper {padding: 0 !important;}
    }
    @media only screen and (max-width: 767px) {
      min-height: 115vh !important;
      .sqs-block {
        max-width: 80vw !important;
        margin: 0 auto;
      }
    }
  }

  .scale-plugin-body {
    //padding-top: 5vw !important;
    align-content: center;
    align-items: center;
    display: flex;
    flex: none;
    flex-direction: column;
    flex-wrap: nowrap;
    gap: 240px;
    height: min-content;
    justify-content: center;
    max-width: 1480px;
    overflow: visible;
    padding: 0 30px;
    position: relative;
    width: 100%;
    z-index: 8;
    .scale-plugin-section {
      position: sticky;
      //top: 5vw;
      top: 0;
      width: 100%;
      height: 100vh;
      will-change: transform;
      z-index: 1;
      .section-border,
      .section-border * {
        background-color: transparent;
      }
      .section-border {
        max-width: 1420px;
        width: 100%;
        height: 90vh;
        margin: 0 auto;
        padding: 0 5vw;
        box-sizing: border-box;
        top: 5vh;
        .section-background {
          border-radius: 25px;
          @media only screen and (max-width: 1280px) {border-radius: 20px;}
          @media only screen and (max-width: 820px) {border-radius: 16px;}
          @media only screen and (max-width: 640px) {border-radius: 12px;}
        }
        @media only screen and (max-width: 1440px) {max-width: 92vw !important;}
      }
      .content-wrapper {
        padding: 0 4vw !important;
        //padding-top: 5vw !important;
        //padding-bottom: 5vw !important;
      }
      .sqs-block {padding-top: 0 !important;}
      &:first-of-type {
        padding-top: 0 !important;
        //.content-wrapper {padding-top: 5vw !important;}
      }
      &:not(:last-of-type) {
        transform: perspective(1200px);
        .content-wrapper {
          padding-bottom: 0 !important;
        }
      }
      @media only screen and (max-width: 819px) {top: 50px;}
      @media only screen and (max-width: 640px) {top: 100px;}
    }
    @media only screen and (max-width: 819px) {
       gap: 120px;
      .scale-plugin-section {
        min-height: 70vh !important;
        height: 70vh !important;
        .section-border {height: 60vh;}
      }
    }
  }
}

/* DRAW TO REVEAL */

.draw-to-reveal-section {
  canvas {
    position: absolute;
    top: 0;
    left: 0;
    width: 100vw;
    height: 100vh;
  }

/*
  #heroVideo {
    position: fixed;
    right: 0;
    bottom: 0;
    min-width: 100%;
    min-height: 100%;
  }
  */
}
/* DRAW TO REVEAL */