document.addEventListener("DOMContentLoaded",function(){let t=document.body;if(t.classList.contains("view-item")&&Array.from(t.classList).find(t=>t.startsWith("collection-type-blog"))){t.classList.add("marca-blog");let e=document.createElement("style");e.textContent=".marca-blog #itemPagination { display: none; }",document.head.appendChild(e),new class e{isLoading=!1;constructor(){this.prevUrl=document.querySelector(".item-pagination-link--prev")?.href,this.nextUrl=document.querySelector(".item-pagination-link--next")?.href,this.currentArticle=document.querySelector("article"),window.addEventListener("scroll",this.onScrollHandle.bind(this))}onScrollHandle(){if(this.currentArticle.getBoundingClientRect().bottom-window.innerHeight<10&&!this.isLoading){if(this.nextUrl)this.showLoadingAnimation(),this.isLoading=!0,this.loadNextArticle();else{this.isLoading=!0;fetch(`${window.location.origin}/${window.location.pathname.split("/")[1]}?format=json-pretty`).then(t=>t.json()).then(t=>{this.nextUrl=t.items[0].fullUrl,this.showLoadingAnimation(),this.loadNextArticle()})}}}showLoadingAnimation(){if(!document.querySelector(".loading-animation")){let e=document.createElement("div");e.className="loading-animation",t.appendChild(e)}}hideLoadingAnimation(){let t=document.querySelector(".loading-animation");t&&t.remove()}loadNextArticle(){fetch(this.nextUrl).then(t=>t.text()).then(t=>{let e=new DOMParser().parseFromString(t,"text/html");this.nextUrl=e.querySelector(".item-pagination-link--next")?.href,this.prevUrl=e.querySelector(".item-pagination-link--prev")?.href;let i=e.querySelector("article");document.querySelector("main").appendChild(i),this.currentArticle=i,this.hideLoadingAnimation()}).finally(()=>this.isLoading=!1)}}}});
