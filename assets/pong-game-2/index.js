if (document.querySelector('[pong-game]')) { function getParentEl(e,l){let a=e;for(;a.parentElement;){if(a.parentElement.tagName.toLowerCase()===l.toLowerCase())return a.parentElement;a=a.parentElement}return null}function setAttrParents(e,l){document.querySelectorAll(`[${values.dataAttr}]`).forEach(a=>{let t=getParentEl(a,l);t&&t.setAttribute(e,"")})}setAttrParents(values.dataAttr,"section");const section=document.querySelector(`section[${values.dataAttr}]`);section.setAttribute("id","gameContainer"),section.style.minHeight="0";var ballX=40,ballY=5,player1Score=0,player2Score=0;const WINNING_SCORE=3;var paddle1Y,paddle2Y,showingWinScreen=!1,PADDLE_HEIGHT=values.paddleHeight,PADDLE_THICKNESS=values.paddleThickness,ballSize=values.ballSize,ballSpeedX=values.ballSpeedX,ballSpeedY=values.ballSpeedY;function setup(){let e=window.innerHeight*(values.canvasHeight/100);createCanvas(section.clientWidth,e).parent("gameContainer"),paddle2Y=height/2-PADDLE_HEIGHT/2,textAlign(CENTER),adjustCanvasWidth()}function adjustCanvasWidth(){resizeCanvas(document.getElementById("gameContainer").offsetWidth,height),adjustElements()}function adjustElements(){let e=width/800;PADDLE_HEIGHT=values.paddleHeight*e,PADDLE_THICKNESS=values.paddleThickness*e,ballSize=values.ballSize*e,ballSpeedX=values.ballSpeedX*e,ballSpeedY=values.ballSpeedY*e,values.playAgainFontSize=12*e,values.wonOrLostMessagesFontSize=20*e,values.scoresFontSize=20*e}function windowResized(){adjustCanvasWidth()}function draw(){background(`${values.canvaBackground}`),moveEverything(),drawEverything()}function moveEverything(){if(!showingWinScreen){if(ballX+=ballSpeedX,ballY+=ballSpeedY,paddle1Y=mouseY-PADDLE_HEIGHT/2,computerMovement(),ballX<0){if(ballY>paddle1Y&&ballY<paddle1Y+PADDLE_HEIGHT){ballSpeedX*=-1;var e=ballY-(paddle1Y+PADDLE_HEIGHT/2);ballSpeedY=.2*e}else player2Score++,ballReset()}if(ballX>width){if(ballY>paddle2Y&&ballY<paddle2Y+PADDLE_HEIGHT){ballSpeedX*=-1;var e=ballY-(paddle2Y+PADDLE_HEIGHT/2);ballSpeedY=.2*e}else player1Score++,ballReset()}ballY>height&&(ballY=height,ballSpeedY*=-1),ballY<0&&(ballY=0,ballSpeedY*=-1)}}function computerMovement(){var e=paddle2Y+PADDLE_HEIGHT/2;e<ballY-PADDLE_HEIGHT/3?paddle2Y+=6:e>ballY+PADDLE_HEIGHT/3&&(paddle2Y-=6)}function ballReset(){(player1Score>=3||player2Score>=3)&&(showingWinScreen=!0),ballSpeedX*=-1,ballX=width/3,ballY=height/3}function drawEverything(){if(fill(values.messagesColor),noStroke(),showingWinScreen){textSize(values.wonOrLostMessagesFontSize),player1Score>=3?text(`${values.winMessage}`,width/2,height/2):player2Score>=3&&text(values.lostMessage,width/2,height/2),textSize(values.playAgainFontSize),text(`${values.playAgainText}`,width/2,height-200);return}fill(values.paddleColor);for(var e=0;e<height;e+=40)rect(width/2-1,e,2,20);rect(0,paddle1Y,PADDLE_THICKNESS,PADDLE_HEIGHT),rect(width-PADDLE_THICKNESS,paddle2Y,PADDLE_THICKNESS,PADDLE_HEIGHT),fill(`${values.ballColor}`),ellipse(ballX,ballY,ballSize,ballSize),textSize(values.scoresFontSize),text(player1Score,width/4,100),text(player2Score,3*width/4,100)}function mouseReleased(){showingWinScreen&&(player1Score=0,player2Score=0,showingWinScreen=!1)} }
